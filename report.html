<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Depression Classification Pipeline â€” Project Report</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            font-size: 11pt;
            line-height: 1.6;
            color: #1a1a2e;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20mm 18mm;
            background: #fff;
        }

        @media print {
            body {
                padding: 15mm;
                font-size: 10.5pt;
            }

            .page-break {
                page-break-before: always;
            }

            h2 {
                page-break-after: avoid;
            }

            table,
            figure {
                page-break-inside: avoid;
            }
        }

        /* Cover Page */
        .cover {
            text-align: center;
            padding: 60px 0 40px;
            border-bottom: 3px solid #667eea;
            margin-bottom: 30px;
        }

        .cover h1 {
            font-size: 26pt;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .cover .subtitle {
            font-size: 13pt;
            color: #667eea;
            font-weight: 500;
            margin-bottom: 30px;
        }

        .cover .meta {
            font-size: 10pt;
            color: #555;
            line-height: 2;
        }

        .cover .meta strong {
            color: #1a1a2e;
        }

        /* Headings */
        h2 {
            font-size: 16pt;
            font-weight: 700;
            color: #1a1a2e;
            border-bottom: 2px solid #667eea;
            padding-bottom: 4px;
            margin: 28px 0 12px;
        }

        h3 {
            font-size: 12pt;
            font-weight: 600;
            color: #333;
            margin: 18px 0 8px;
        }

        h4 {
            font-size: 10.5pt;
            font-weight: 600;
            color: #555;
            margin: 12px 0 6px;
        }

        p {
            margin-bottom: 10px;
            text-align: justify;
        }

        ul,
        ol {
            margin: 6px 0 12px 24px;
        }

        li {
            margin-bottom: 4px;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0 16px;
            font-size: 10pt;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 7px 10px;
            text-align: left;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f8f9ff;
        }

        /* Code */
        code {
            background: #f0f0f5;
            padding: 1px 5px;
            border-radius: 3px;
            font-size: 9.5pt;
            font-family: 'Consolas', monospace;
        }

        pre {
            background: #1a1a2e;
            color: #e0e0e0;
            padding: 14px 16px;
            border-radius: 6px;
            font-size: 9pt;
            overflow-x: auto;
            margin: 10px 0 16px;
            line-height: 1.5;
        }

        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }

        /* Diagrams */
        .diagram-box {
            background: #f8f9ff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0 16px;
            font-family: 'Consolas', monospace;
            font-size: 9pt;
            line-height: 1.4;
            white-space: pre;
            overflow-x: auto;
        }

        /* Callout boxes */
        .callout {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 12px 16px;
            margin: 12px 0;
            border-radius: 0 6px 6px 0;
            font-size: 10pt;
        }

        .callout.green {
            background: #f0fff4;
            border-left-color: #20bf6b;
        }

        .callout.orange {
            background: #fff8f0;
            border-left-color: #f7b731;
        }

        /* Screenshot placeholder */
        .screenshot-placeholder {
            background: #f5f5f5;
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            color: #888;
            font-style: italic;
            margin: 12px 0;
        }

        .toc {
            margin: 16px 0 24px;
        }

        .toc a {
            color: #667eea;
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        .toc li {
            margin-bottom: 3px;
        }

        footer {
            text-align: center;
            color: #888;
            font-size: 9pt;
            margin-top: 40px;
            padding-top: 12px;
            border-top: 1px solid #ddd;
        }
    </style>
</head>

<body>

    <!-- ==================== PAGE 1: COVER ==================== -->
    <div class="cover">
        <h1>ğŸ§  Student Depression<br>Classification Pipeline</h1>
        <div class="subtitle">ML Classification System with MLOps, API Serving, Monitoring, CI/CD &amp; Deployment</div>
        <div class="meta">
            <strong>Course:</strong> MTA â€” Advanced Analytics II<br>
            <strong>Author:</strong> Enosh<br>
            <strong>Date:</strong> February 12, 2026<br>
            <strong>GitHub:</strong> <a
                href="https://github.com/enosh729-design/Student-Depression-Predictor">enosh729-design/Student-Depression-Predictor</a><br>
            <strong>Tech Stack:</strong> Python Â· scikit-learn Â· FastAPI Â· Streamlit Â· Docker Â· Prometheus Â· Grafana Â·
            W&amp;B Â· Render
        </div>
    </div>

    <h2>Table of Contents</h2>
    <ol class="toc">
        <li><a href="#sec1">Introduction &amp; Problem Statement</a></li>
        <li><a href="#sec2">Architecture &amp; Pipeline Diagram</a></li>
        <li><a href="#sec3">Data Layer</a></li>
        <li><a href="#sec4">Model Training &amp; Experimentation</a></li>
        <li><a href="#sec5">Model Performance &amp; Best Hyperparameters</a></li>
        <li><a href="#sec6">W&amp;B Experiment Tracking</a></li>
        <li><a href="#sec7">Backend API (FastAPI)</a></li>
        <li><a href="#sec8">Containerization &amp; Monitoring</a></li>
        <li><a href="#sec9">Frontend (Streamlit)</a></li>
        <li><a href="#sec10">Testing &amp; Code Quality</a></li>
        <li><a href="#sec11">CI/CD &amp; Deployment</a></li>
        <li><a href="#sec12">Business Value</a></li>
        <li><a href="#sec13">Conclusion</a></li>
    </ol>

    <!-- ==================== PAGE 2 ==================== -->
    <div class="page-break"></div>

    <h2 id="sec1">1. Introduction &amp; Problem Statement</h2>

    <p>
        Student mental health is a pressing concern across higher education institutions globally. Depression among
        university students leads to lower academic performance, increased dropout rates, higher healthcare costs, and
        long-term career impacts. Early identification of at-risk students through data-driven approaches can enable
        proactive intervention and substantially improve student outcomes.
    </p>

    <p>
        This project builds a <strong>complete binary classification system</strong> to predict student depression risk
        based on easily collectible lifestyle factors. The solution follows modern <strong>MLOps best practices</strong>
        and demonstrates the entire machine learning lifecycle â€” from data ingestion and versioning to model training,
        API serving, monitoring, CI/CD, and cloud deployment.
    </p>

    <h3>Objectives</h3>
    <ul>
        <li>Store and load data from a serverless PostgreSQL database (Neon Postgres)</li>
        <li>Build a scikit-learn pipeline with preprocessing and classification</li>
        <li>Perform hyperparameter tuning and track experiments with Weights &amp; Biases</li>
        <li>Serve predictions via a FastAPI REST API with Prometheus metrics</li>
        <li>Build an interactive Streamlit frontend</li>
        <li>Containerize with Docker, monitor with Prometheus + Grafana</li>
        <li>Implement CI/CD with GitHub Actions, deploy to Render</li>
    </ul>

    <h2 id="sec2">2. Architecture &amp; Pipeline Diagram</h2>

    <div class="diagram-box">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ DATA LAYER â”‚
        â”‚ CSV (100K rows) â”€â”€â†’ Neon Postgres â”€â”€â†’ pandas DataFrame â”‚
        â”‚ student_lifestyle_100k.csv SQLAlchemy psycopg2 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ MODEL TRAINING â”‚
        â”‚ ColumnTransformer â”€â”€â†’ RandomForestClassifier â”‚
        â”‚ â”œâ”€ StandardScaler (7 numerical features) â”‚
        â”‚ â””â”€ OneHotEncoder (2 categorical features) â”‚
        â”‚ â”‚ â”‚
        â”‚ RandomizedSearchCV (50 iters, 3-fold, F1 scoring) â”‚
        â”‚ â”‚ â”‚
        â”‚ â””â”€â”€â†’ W&amp;B Logging (metrics, params, artifacts) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ SERVING LAYER â”‚
        â”‚ FastAPI â”€â”€â”€ POST /predict â†’ JSON prediction response â”‚
        â”‚ â”€â”€â”€ GET /health â†’ Health status â”‚
        â”‚ â”€â”€â”€ GET /metrics â†’ Prometheus metrics â”‚
        â”‚ â”‚ â”‚
        â”‚ Prometheus scrapes every 10s â”‚
        â”‚ â”‚ â”‚
        â”‚ Grafana â”€â”€â”€ 6 dashboard panels â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ FRONTEND + DEPLOYMENT â”‚
        â”‚ Streamlit UI â”€â”€â”€ Input Form â”€â”€â†’ FastAPI â”€â”€â†’ Results â”‚
        â”‚ â”‚
        â”‚ GitHub Actions CI/CD â”€â”€â†’ Render (Backend + Frontend) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

    <!-- ==================== PAGE 3 ==================== -->
    <div class="page-break"></div>

    <h2 id="sec3">3. Data Layer</h2>

    <h3>3.1 Dataset Overview</h3>
    <p>
        The dataset contains <strong>100,000 student records</strong> with lifestyle factors and a binary depression
        label. The data was pre-collected and provided as a CSV file.
    </p>

    <table>
        <tr>
            <th>Feature</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>Student_ID</td>
            <td>int</td>
            <td>Unique identifier</td>
        </tr>
        <tr>
            <td>Age</td>
            <td>int</td>
            <td>Student age (18â€“24)</td>
        </tr>
        <tr>
            <td>Gender</td>
            <td>str</td>
            <td>Male / Female</td>
        </tr>
        <tr>
            <td>Department</td>
            <td>str</td>
            <td>Science, Engineering, Medical, Arts, Business</td>
        </tr>
        <tr>
            <td>CGPA</td>
            <td>float</td>
            <td>Cumulative GPA (0.0â€“4.0)</td>
        </tr>
        <tr>
            <td>Sleep_Duration</td>
            <td>float</td>
            <td>Daily sleep hours</td>
        </tr>
        <tr>
            <td>Study_Hours</td>
            <td>float</td>
            <td>Daily study hours</td>
        </tr>
        <tr>
            <td>Social_Media_Hours</td>
            <td>float</td>
            <td>Daily social media usage</td>
        </tr>
        <tr>
            <td>Physical_Activity</td>
            <td>int</td>
            <td>Physical activity score (0â€“150)</td>
        </tr>
        <tr>
            <td>Stress_Level</td>
            <td>int</td>
            <td>Stress level (0â€“10)</td>
        </tr>
        <tr>
            <td><strong>Depression</strong></td>
            <td><strong>bool</strong></td>
            <td><strong>Target: True (10.06%) / False (89.94%)</strong></td>
        </tr>
    </table>

    <div class="callout orange">
        <strong>âš ï¸ Class Imbalance:</strong> Only 10.06% of records are labeled as "Depression". This imbalance was
        addressed using <code>class_weight="balanced"</code> in the Random Forest classifier.
    </div>

    <h3>3.2 Neon Postgres Integration</h3>
    <p>
        The raw CSV was uploaded to a <strong>Neon Postgres</strong> (serverless PostgreSQL) database using the
        <code>data/load_to_postgres.py</code> script. The training pipeline loads data from Postgres via SQLAlchemy with
        a CSV fallback:
    </p>
    <pre><code># From Postgres (primary)
from src.data_loader import load_data_from_postgres
df = load_data_from_postgres()

# From CSV (fallback)
from src.data_loader import load_data_from_csv
df = load_data_from_csv("data/student_lifestyle_100k.csv")</code></pre>

    <!-- ==================== PAGE 4 ==================== -->
    <div class="page-break"></div>

    <h2 id="sec4">4. Model Training &amp; Experimentation</h2>

    <h3>4.1 Preprocessing Pipeline</h3>
    <p>
        A <code>ColumnTransformer</code> handles two types of features:
    </p>
    <ul>
        <li><strong>Numerical (7 features):</strong> Age, CGPA, Sleep_Duration, Study_Hours, Social_Media_Hours,
            Physical_Activity, Stress_Level â†’ <code>StandardScaler</code></li>
        <li><strong>Categorical (2 features):</strong> Gender, Department â†’ <code>OneHotEncoder</code> (with
            <code>handle_unknown="ignore"</code>)
        </li>
    </ul>

    <h3>4.2 Classification Model</h3>
    <p>
        A <code>RandomForestClassifier</code> was chosen for its robustness, interpretability, and strong performance on
        tabular data. The preprocessor and classifier are wrapped in a single <code>sklearn.Pipeline</code> for clean
        serialization and deployment.
    </p>

    <h3>4.3 Hyperparameter Tuning</h3>
    <p>
        <code>RandomizedSearchCV</code> was used with the following search space:
    </p>

    <table>
        <tr>
            <th>Parameter</th>
            <th>Search Space</th>
        </tr>
        <tr>
            <td>n_estimators</td>
            <td>[50, 100, 200, 300, 500]</td>
        </tr>
        <tr>
            <td>max_depth</td>
            <td>[5, 10, 15, 20, None]</td>
        </tr>
        <tr>
            <td>min_samples_split</td>
            <td>[2, 5, 10, 20]</td>
        </tr>
        <tr>
            <td>min_samples_leaf</td>
            <td>[1, 2, 4, 8]</td>
        </tr>
        <tr>
            <td>max_features</td>
            <td>["sqrt", "log2", None]</td>
        </tr>
        <tr>
            <td>class_weight</td>
            <td>["balanced", "balanced_subsample"]</td>
        </tr>
    </table>

    <ul>
        <li><strong>Iterations:</strong> 50 random combinations</li>
        <li><strong>Cross-validation:</strong> 3-fold stratified</li>
        <li><strong>Scoring metric:</strong> F1-score (optimizes for precisionâ€“recall balance)</li>
        <li><strong>Total fits:</strong> 150 (50 Ã— 3 folds)</li>
    </ul>

    <h2 id="sec5">5. Model Performance &amp; Best Hyperparameters</h2>

    <h3>5.1 Best Hyperparameters</h3>
    <table>
        <tr>
            <th>Parameter</th>
            <th>Best Value</th>
        </tr>
        <tr>
            <td>n_estimators</td>
            <td>100</td>
        </tr>
        <tr>
            <td>max_depth</td>
            <td>5</td>
        </tr>
        <tr>
            <td>min_samples_split</td>
            <td>20</td>
        </tr>
        <tr>
            <td>min_samples_leaf</td>
            <td>4</td>
        </tr>
        <tr>
            <td>max_features</td>
            <td>sqrt</td>
        </tr>
        <tr>
            <td>class_weight</td>
            <td>balanced</td>
        </tr>
    </table>

    <h3>5.2 Test Set Metrics</h3>
    <table>
        <tr>
            <th>Metric</th>
            <th>Score</th>
        </tr>
        <tr>
            <td>Accuracy</td>
            <td>0.7356</td>
        </tr>
        <tr>
            <td>F1-Score</td>
            <td>0.3226</td>
        </tr>
        <tr>
            <td>ROC-AUC</td>
            <td>0.7027</td>
        </tr>
        <tr>
            <td>Precision</td>
            <td>0.2173</td>
        </tr>
        <tr>
            <td>Recall</td>
            <td>0.6257</td>
        </tr>
        <tr>
            <td>Best CV F1</td>
            <td>0.3273</td>
        </tr>
    </table>

    <div class="callout green">
        <strong>Key Insight:</strong> The <code>class_weight="balanced"</code> setting was critical. Without it, the
        model achieved 89.9% accuracy but only 1.29% recall â€” it predicted "No Depression" for nearly every input. With
        balanced weights, recall improved to 62.57%, enabling meaningful depression detection at the cost of some
        accuracy.
    </div>

    <!-- ==================== PAGE 5 ==================== -->
    <div class="page-break"></div>

    <h2 id="sec6">6. W&amp;B Experiment Tracking</h2>

    <p>
        All experiments are tracked in <strong>Weights &amp; Biases</strong> under the project
        <code>student-depression-classifier</code>. The training pipeline logs:
    </p>
    <ul>
        <li><strong>Metrics:</strong> Accuracy, F1, ROC-AUC, Precision, Recall</li>
        <li><strong>Visualizations:</strong> Confusion Matrix, ROC Curve</li>
        <li><strong>Parameters:</strong> All hyperparameters from RandomizedSearchCV</li>
        <li><strong>Artifacts:</strong> Best model pipeline (<code>.joblib</code>) + metrics JSON</li>
    </ul>

    <div class="screenshot-placeholder">
        <img src="screenshots/wandb_dashboard.png" alt="W&B Dashboard"
            style="max-width:100%; border:1px solid #ddd; border-radius:4px;">
        <br><small>Figure 1: W&B Experiment Dashboard</small>
    </div>

    <div class="screenshot-placeholder">
        <img src="screenshots/wandb_confusion_matrix.png" alt="Confusion Matrix"
            style="max-width:100%; border:1px solid #ddd; border-radius:4px;">
        <br><small>Figure 2: Confusion Matrix</small>
    </div>

    <div class="screenshot-placeholder">
        <img src="screenshots/wandb_roc_curve.png" alt="ROC Curve"
            style="max-width:100%; border:1px solid #ddd; border-radius:4px;">
        <br><small>Figure 3: ROC Curve</small>
    </div>

    <h3>Model Artifact</h3>
    <p>
        The best model is saved as <code>models/best_model.joblib</code> (67 MB) and also registered as a W&amp;B
        artifact named <code>best-model</code> with type <code>model</code>. This enables versioning, lineage tracking,
        and reproducibility.
    </p>

    <!-- ==================== PAGE 6 ==================== -->
    <div class="page-break"></div>

    <h2 id="sec7">7. Backend API (FastAPI)</h2>

    <h3>7.1 Endpoints</h3>
    <table>
        <tr>
            <th>Method</th>
            <th>Path</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>POST</td>
            <td>/predict</td>
            <td>Submit student data, returns depression prediction with probabilities</td>
        </tr>
        <tr>
            <td>GET</td>
            <td>/health</td>
            <td>Health check â€” returns API status and model loaded status</td>
        </tr>
        <tr>
            <td>GET</td>
            <td>/metrics</td>
            <td>Prometheus-format metrics for monitoring</td>
        </tr>
        <tr>
            <td>GET</td>
            <td>/docs</td>
            <td>Auto-generated Swagger UI documentation</td>
        </tr>
    </table>

    <h3>7.2 Pydantic Validation</h3>
    <p>
        All request/response payloads are validated with Pydantic models. For example, <code>StudentInput</code>
        enforces field-level constraints: <code>Age</code> must be 15â€“30, <code>CGPA</code> must be 0.0â€“4.0,
        <code>Stress_Level</code> must be 0â€“10, etc. Invalid inputs return HTTP 422 with detailed error messages.
    </p>

    <h3>7.3 Postman Testing</h3>

    <div class="screenshot-placeholder">
        <img src="screenshots/postman_predict_200.png" alt="Postman Predict 200"
            style="max-width:100%; border:1px solid #ddd; border-radius:4px;">
        <br><small>Figure 4: Successful Prediction (200 OK)</small>
    </div>

    <div class="screenshot-placeholder">
        <img src="screenshots/postman_predict_422.png" alt="Postman Predict 422"
            style="max-width:100%; border:1px solid #ddd; border-radius:4px;">
        <br><small>Figure 5: Validation Error (422 Unprocessable Entity)</small>
    </div>

    <div class="screenshot-placeholder">
        <img src="screenshots/postman_health_200.png" alt="Postman Health 200"
            style="max-width:100%; border:1px solid #ddd; border-radius:4px;">
        <br><small>Figure 6: Health Check (200 OK)</small>
    </div>

    <!-- ==================== PAGE 7 ==================== -->
    <div class="page-break"></div>

    <h2 id="sec8">8. Containerization &amp; Monitoring</h2>

    <h3>8.1 Docker Setup</h3>
    <p>
        The FastAPI backend runs in a Docker container built from <code>python:3.11-slim</code>. A
        <code>docker-compose.yml</code> orchestrates three services:
    </p>
    <table>
        <tr>
            <th>Service</th>
            <th>Image</th>
            <th>Port</th>
        </tr>
        <tr>
            <td>FastAPI API</td>
            <td>custom (Dockerfile)</td>
            <td>8000</td>
        </tr>
        <tr>
            <td>Prometheus</td>
            <td>prom/prometheus:latest</td>
            <td>9090</td>
        </tr>
        <tr>
            <td>Grafana</td>
            <td>grafana/grafana:latest</td>
            <td>3000</td>
        </tr>
    </table>

    <h3>8.2 Prometheus Metrics</h3>
    <p>
        The API exposes custom Prometheus metrics via <code>/metrics</code>:
    </p>
    <ul>
        <li><code>prediction_requests_total</code> â€” Counter with status labels (success/error)</li>
        <li><code>prediction_latency_seconds</code> â€” Histogram with configurable buckets</li>
        <li><code>prediction_results_total</code> â€” Counter with outcome labels (Depression/No Depression)</li>
        <li><code>model_loaded</code> â€” Gauge (1 = loaded, 0 = not loaded)</li>
    </ul>

    <h3>8.3 Grafana Dashboards (6 Panels)</h3>
    <p>
        A pre-provisioned Grafana dashboard (<code>api_dashboard.json</code>) provides real-time visibility:
    </p>
    <ol>
        <li><strong>Request Count Rate</strong> â€” Prediction requests per second over time</li>
        <li><strong>Latency Percentiles</strong> â€” p50, p95, p99 response latency</li>
        <li><strong>Prediction Outcomes</strong> â€” Depression vs No Depression rates</li>
        <li><strong>Model Status</strong> â€” UP/DOWN indicator</li>
        <li><strong>Total Predictions</strong> â€” Cumulative prediction count</li>
        <li><strong>Error Rate</strong> â€” Percentage of failed requests</li>
    </ol>

    <div class="screenshot-placeholder">
        <img src="screenshots/grafana_dashboard.png" alt="Grafana Dashboard"
            style="max-width:100%; border:1px solid #ddd; border-radius:4px;">
        <br><small>Figure 7: Grafana Monitoring Dashboard</small>
    </div>

    <!-- ==================== PAGE 8 ==================== -->
    <div class="page-break"></div>

    <h2 id="sec9">9. Frontend (Streamlit)</h2>

    <p>
        An interactive Streamlit UI at <code>http://localhost:8501</code> provides a user-friendly interface for making
        predictions:
    </p>
    <ul>
        <li><strong>Input Form:</strong> Sliders and dropdowns for all 9 features (Age, Gender, Department, CGPA, Sleep,
            Study Hours, Social Media, Physical Activity, Stress Level)</li>
        <li><strong>API Health Check:</strong> Sidebar indicator showing API connection status</li>
        <li><strong>Prediction Display:</strong> Color-coded result box with confidence scores</li>
        <li><strong>Detailed Probabilities:</strong> Breakdown of No Depression / Depression probabilities</li>
    </ul>

    <div class="screenshot-placeholder">
        <img src="screenshots/streamlit_frontend.png" alt="Streamlit Frontend"
            style="max-width:100%; border:1px solid #ddd; border-radius:4px;">
        <br><small>Figure 8: Streamlit Interface</small>
    </div>

    <h2 id="sec10">10. Testing &amp; Code Quality</h2>

    <h3>10.1 Unit Tests (pytest)</h3>
    <p>
        <strong>15 tests</strong> across 3 test files â€” all passing:
    </p>

    <table>
        <tr>
            <th>Test File</th>
            <th>Tests</th>
            <th>Covers</th>
        </tr>
        <tr>
            <td>test_data_validation.py</td>
            <td>5</td>
            <td>Schema validation, missing columns, feature/target split, target dtype, empty DataFrame</td>
        </tr>
        <tr>
            <td>test_model_inference.py</td>
            <td>5</td>
            <td>Prediction dict format, valid prediction values, probability sum, batch prediction, labelâ€“prediction
                match</td>
        </tr>
        <tr>
            <td>test_api_endpoints.py</td>
            <td>5</td>
            <td>GET /health, POST /predict (valid), POST /predict (missing fields â†’ 422), POST /predict (invalid range â†’
                422), GET /metrics</td>
        </tr>
    </table>

    <pre><code>$ python -m pytest tests/ -v --tb=short
======================== 15 passed, 1 warning in 1.36s ========================</code></pre>

    <h3>10.2 Linting Scores</h3>
    <table>
        <tr>
            <th>Tool</th>
            <th>Result</th>
        </tr>
        <tr>
            <td>Flake8</td>
            <td>0 errors, 0 warnings âœ…</td>
        </tr>
        <tr>
            <td>Pylint</td>
            <td>Minor non-critical notes only (R0914 too-many-locals in train function) âœ…</td>
        </tr>
    </table>

    <!-- ==================== PAGE 9 ==================== -->
    <div class="page-break"></div>

    <h2 id="sec11">11. CI/CD &amp; Deployment</h2>

    <h3>11.1 GitHub Actions</h3>
    <p>
        Two CI/CD workflows are configured in <code>.github/workflows/</code>, both triggered on push to
        <code>main</code>:
    </p>

    <h4>Backend Pipeline (<code>backend.yml</code>)</h4>
    <div class="diagram-box">push to main â”€â”€â†’ Lint (Flake8 + Pylint) â”€â”€â†’ Test (pytest) â”€â”€â†’ Deploy to Render</div>

    <h4>Frontend Pipeline (<code>frontend.yml</code>)</h4>
    <div class="diagram-box">push to main â”€â”€â†’ Lint (Flake8 + Pylint) â”€â”€â†’ Test (pytest) â”€â”€â†’ Deploy to Render</div>

    <h3>11.2 Render Deployment</h3>
    <p>
        Both services are deployed to <strong>Render</strong> cloud platform:
    </p>
    <table>
        <tr>
            <th>Service</th>
            <th>Type</th>
            <th>Live URL</th>
        </tr>
        <tr>
            <td>FastAPI Backend</td>
            <td>Docker</td>
            <td><a
                    href="https://student-depression-predictor-c3ce.onrender.com">student-depression-predictor-c3ce.onrender.com</a>
            </td>
        </tr>
        <tr>
            <td>Streamlit Frontend</td>
            <td>Python</td>
            <td><a href="https://student-depression-frontend.onrender.com">student-depression-frontend.onrender.com</a>
            </td>
        </tr>
    </table>

    <h3>11.3 GitHub Repository</h3>
    <p>
        All code is hosted on a public GitHub repository:<br>
        <a
            href="https://github.com/enosh729-design/Student-Depression-Predictor">https://github.com/enosh729-design/Student-Depression-Predictor</a>
    </p>

    <h2 id="sec12">12. Business Value</h2>

    <h3>12.1 Problem</h3>
    <p>
        Student mental health is a critical and growing concern. Depression leads to lower academic performance, higher
        dropout rates, increased healthcare costs, and long-term career impacts. Traditional screening methods are
        manual, expensive, and don't scale.
    </p>

    <h3>12.2 Solution</h3>
    <p>
        This ML system enables <strong>early identification</strong> of at-risk students using easily collectible
        lifestyle data. Key value propositions:
    </p>
    <ol>
        <li><strong>Proactive Intervention</strong> â€” Flag at-risk students before grades drop, enabling counselors to
            act early</li>
        <li><strong>Resource Optimization</strong> â€” Direct limited counseling resources to students with the highest
            need</li>
        <li><strong>Data-Driven Policy</strong> â€” Provide administrators with evidence-based insights for wellness
            program design</li>
        <li><strong>Scalable Screening</strong> â€” Process thousands of students instantly vs. weeks of manual assessment
        </li>
        <li><strong>Privacy-Preserving</strong> â€” Uses lifestyle metrics (sleep, stress, activity) rather than sensitive
            medical records</li>
    </ol>

    <h3>12.3 ROI Estimate</h3>
    <div class="callout green">
        A university with 10,000 students and a 15% depression rate can save an estimated <strong>$2â€“5M
            annually</strong> through reduced dropout costs and optimized counseling. Early intervention has been shown
        to improve retention rates by <strong>10â€“15%</strong>.
    </div>

    <!-- ==================== PAGE 10 ==================== -->
    <div class="page-break"></div>

    <h2 id="sec13">13. Conclusion</h2>

    <p>
        This project demonstrates a <strong>complete, production-grade ML classification system</strong> following
        modern MLOps best practices. The solution covers the full lifecycle:
    </p>

    <ul>
        <li><strong>Data Layer:</strong> Neon Postgres with SQLAlchemy data loading</li>
        <li><strong>Training:</strong> scikit-learn pipeline with RandomizedSearchCV and W&amp;B tracking</li>
        <li><strong>Serving:</strong> FastAPI REST API with Pydantic validation and Prometheus metrics</li>
        <li><strong>Monitoring:</strong> Docker Compose with Prometheus + Grafana (6 dashboards)</li>
        <li><strong>Frontend:</strong> Interactive Streamlit UI</li>
        <li><strong>Quality:</strong> 15 pytest tests, Flake8/Pylint clean code</li>
        <li><strong>CI/CD:</strong> GitHub Actions (lint â†’ test â†’ deploy) for both backend and frontend</li>
        <li><strong>Deployment:</strong> Render cloud (FastAPI + Streamlit)</li>
    </ul>

    <p>
        The key technical insight was the importance of handling class imbalance â€” using
        <code>class_weight="balanced"</code> and F1 scoring improved recall from 1.29% to 62.57%, transforming the model
        from a trivial majority-class predictor into a useful depression screening tool.
    </p>

    <p>
        The system is designed for real-world adoption by university counseling departments, with a simple web interface
        for non-technical users and robust API endpoints for integration with existing student information systems.
    </p>

    <h3>Demo Video</h3>
    <div class="callout">
        <strong>ğŸ“¹ Demo Video Link:</strong> [INSERT 5-MINUTE VIDEO LINK HERE]<br>
        <small>The video walks through: local setup â†’ data loading â†’ model training â†’ API testing â†’ Streamlit UI â†’
            Grafana dashboards â†’ Render deployment.</small>
    </div>

    <h3>Project Links</h3>
    <table>
        <tr>
            <th>Resource</th>
            <th>URL</th>
        </tr>
        <tr>
            <td>GitHub Repository</td>
            <td><a
                    href="https://github.com/enosh729-design/Student-Depression-Predictor">github.com/enosh729-design/Student-Depression-Predictor</a>
            </td>
        </tr>
        <tr>
            <td>Live API</td>
            <td><a
                    href="https://student-depression-predictor-c3ce.onrender.com/docs">student-depression-predictor-c3ce.onrender.com/docs</a>
            </td>
        </tr>
        <tr>
            <td>Live Frontend</td>
            <td><a href="https://student-depression-frontend.onrender.com">student-depression-frontend.onrender.com</a>
            </td>
        </tr>
        <tr>
            <td>W&amp;B Project</td>
            <td><a href="https://wandb.ai/">wandb.ai/YOUR_PROJECT</a></td>
        </tr>
    </table>

    <footer>
        Student Depression Classification Pipeline â€” MTA Advanced Analytics II â€” February 2026
    </footer>

</body>

</html>